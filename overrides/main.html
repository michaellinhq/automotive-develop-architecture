{% extends "base.html" %}

{% block announce %}
{% if config.extra.announcement %}
<div class="announce-row">
  <div class="announce-left">
    {{ config.extra.announcement | safe }}
  </div>
  <div class="announce-right">
    <a class="announce-ai-btn" href="/ai-models/" title="Free AI Model Finder">
      Free AI Model Finder
    </a>
  </div>
</div>
{% endif %}
{% endblock %}

{% block content %}
<!-- è¯­è¨€åˆ‡æ¢æµ®åŠ¨æŒ‰é’® -->
<div class="language-switcher-float">
  <button id="lang-toggle" class="lang-toggle-btn" aria-label="Switch Language" title="åˆ‡æ¢è¯­è¨€ / Switch Language">
    <span class="lang-icon">ğŸŒ</span>
    <span class="lang-text" id="current-lang">ä¸­æ–‡</span>
    <span class="lang-arrow">â–¼</span>
  </button>
  <div class="lang-dropdown" id="lang-dropdown">
    <a href="{{ '/' | url }}" class="lang-option" data-lang="zh">
      <span class="flag-icon">ğŸ‡¨ğŸ‡³</span>
      <span class="lang-name">ä¸­æ–‡</span>
      <span class="lang-check">âœ“</span>
    </a>
    <a href="{{ '/en/' | url }}" class="lang-option" data-lang="en">
      <span class="flag-icon">ğŸ‡¬ğŸ‡§</span>
      <span class="lang-name">English</span>
      <span class="lang-check">âœ“</span>
    </a>
  </div>
</div>

{{ super() }}

<!-- Selection helper (Ask AI) -->
<div id="ai-selection-toolbar" class="ai-selection-toolbar" style="display:none;">
  <button id="ai-ask-btn" class="ai-ask-btn" type="button">Ask AI</button>
  <button id="ai-close-btn" class="ai-close-btn" type="button" aria-label="Close">âœ•</button>
</div>

<!-- å¾®ä¿¡äºŒç»´ç å¼¹çª— -->
<div id="wechat-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:9999; justify-content:center; align-items:center;">
  <div style="background:white; padding:2.5rem; border-radius:16px; text-align:center; max-width:360px; box-shadow: 0 20px 60px rgba(0,0,0,0.4);">
    <div style="width:48px; height:48px; background:linear-gradient(135deg, #07c160 0%, #09bb07 100%); border-radius:12px; margin:0 auto 1rem; display:flex; align-items:center; justify-content:center;">
      <svg style="width:28px; height:28px; fill:white;" viewBox="0 0 24 24"><path d="M8.691 2.188C3.891 2.188 0 5.476 0 9.53c0 2.212 1.17 4.203 3.002 5.55a.59.59 0 0 1 .213.665l-.39 1.48c-.019.07-.048.141-.048.213 0 .163.13.295.29.295a.326.326 0 0 0 .167-.054l1.903-1.114a.864.864 0 0 1 .717-.098 10.16 10.16 0 0 0 2.837.403c.276 0 .543-.027.811-.05-.857-2.578.157-4.972 1.932-6.446 1.703-1.415 3.882-1.98 5.853-1.838-.576-3.583-4.196-6.348-8.596-6.348zM5.785 5.991c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178A1.17 1.17 0 0 1 4.623 7.17c0-.651.52-1.18 1.162-1.18zm5.813 0c.642 0 1.162.529 1.162 1.18a1.17 1.17 0 0 1-1.162 1.178 1.17 1.17 0 0 1-1.162-1.178c0-.651.52-1.18 1.162-1.18zm5.34 2.867c-1.797-.052-3.746.512-5.28 1.786-1.72 1.428-2.687 3.72-1.78 6.22.942 2.453 3.666 4.229 6.884 4.229.826 0 1.622-.12 2.361-.336a.722.722 0 0 1 .598.082l1.584.926a.272.272 0 0 0 .14.045c.134 0 .24-.111.24-.247 0-.06-.023-.12-.038-.177l-.327-1.233a.582.582 0 0 1-.023-.156.49.49 0 0 1 .201-.398C23.024 18.48 24 16.82 24 14.98c0-3.21-2.931-5.837-6.656-6.088V8.89c-.135-.007-.27-.024-.407-.03zm-2.53 3.274c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.97-.982zm4.844 0c.535 0 .969.44.969.982a.976.976 0 0 1-.969.983.976.976 0 0 1-.969-.983c0-.542.434-.982.969-.982z"/></svg>
    </div>
    <h3 style="margin:0 0 0.5rem; color:#1a237e; font-size:1.3rem;">æ·»åŠ å¾®ä¿¡äº¤æµ</h3>
    <p style="color:#666; font-size:0.9rem; margin:0 0 1.5rem;">æ‰«ç æ·»åŠ ï¼Œå¤‡æ³¨ã€Œæ¶æ„å¸ˆã€ä¼˜å…ˆé€šè¿‡</p>
<div style="width:200px; height:200px; margin:0 auto 1.5rem; border-radius:12px; overflow:hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
             <img src="{{ '/assets/wechat-qrcode.png' | url }}" alt="å¾®ä¿¡äºŒç»´ç " style="width:100%; height:100%; object-fit:cover;" onerror="this.parentElement.innerHTML='<div style=\'width:100%;height:100%;background:#f5f5f5;display:flex;align-items:center;justify-content:center;color:#999;font-size:0.85rem;text-align:center;\'>äºŒç»´ç åŠ è½½ä¸­...</div>'"/>
           </div>
           <p style="color:#333; font-size:0.95rem; margin:0 0 1.5rem;">
             å¾®ä¿¡å·: <strong style="color:#07c160;">darktempler-vv</strong>
           </p>
    <button onclick="document.getElementById('wechat-modal').style.display='none'" style="background:linear-gradient(135deg, #1a237e 0%, #0d47a1 100%); color:white; border:none; padding:0.8rem 2.5rem; border-radius:8px; cursor:pointer; font-size:1rem; font-weight:600; box-shadow:0 4px 15px rgba(26,35,126,0.3); transition:all 0.3s ease;">
      å…³é—­
    </button>
  </div>
</div>

<script>
const AI_MODEL_CATALOG = [];

function getSelectedText() {
  const selection = window.getSelection();
  return selection ? selection.toString().trim() : "";
}

function positionToolbar(rangeRect) {
  const toolbar = document.getElementById('ai-selection-toolbar');
  if (!toolbar) return;
  const top = window.scrollY + rangeRect.top - 44;
  const left = window.scrollX + rangeRect.left;
  toolbar.style.top = `${Math.max(8, top)}px`;
  toolbar.style.left = `${Math.max(8, left)}px`;
}

function showToolbar(rangeRect) {
  const toolbar = document.getElementById('ai-selection-toolbar');
  if (!toolbar) return;
  positionToolbar(rangeRect);
  toolbar.style.display = 'flex';
}

function hideToolbar() {
  const toolbar = document.getElementById('ai-selection-toolbar');
  if (!toolbar) return;
  toolbar.style.display = 'none';
}

document.addEventListener('mouseup', () => {
  const selection = window.getSelection();
  if (!selection || selection.isCollapsed) {
    hideToolbar();
    return;
  }
  const range = selection.getRangeAt(0);
  const rect = range.getBoundingClientRect();
  if (rect.width === 0 && rect.height === 0) {
    hideToolbar();
    return;
  }
  showToolbar(rect);
});

document.addEventListener('scroll', () => {
  hideToolbar();
});

document.getElementById('ai-close-btn').addEventListener('click', () => {
  hideToolbar();
});

document.getElementById('ai-ask-btn').addEventListener('click', () => {
  const text = getSelectedText();
  if (!text) {
    hideToolbar();
    return;
  }
  const query = encodeURIComponent(text);
  const url = `/ai-models/?q=${query}`;
  window.open(url, '_blank');
  hideToolbar();
});

document.querySelectorAll('a[href="#wechat-qrcode"]').forEach(function(el) {
  el.addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('wechat-modal').style.display = 'flex';
  });
});

document.getElementById('wechat-modal').addEventListener('click', function(e) {
  if (e.target === this) {
    this.style.display = 'none';
  }
});
</script>
{% endblock %}

{% block footer %}
{{ super() }}

<!-- ä½œè€…ç®€ä»‹å¡ç‰‡ -->
<div class="author-card" style="background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%); color: white; padding: 3rem 2rem; border-top: 4px solid #ffeb3b;">
  <div style="max-width: 1200px; margin: 0 auto;">
    <div style="display: flex; flex-wrap: wrap; gap: 2.5rem; align-items: flex-start;">
      
      <!-- å·¦ä¾§å¤´åƒå’ŒåŸºæœ¬ä¿¡æ¯ -->
      <div style="flex: 0 0 280px;">
        <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
          <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem; font-weight: 700; color: #1a237e;">
            ML
          </div>
          <div>
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.3rem;">
              <span style="background: linear-gradient(135deg, #4caf50 0%, #43a047 100%); color: white; padding: 0.15rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;">Verified</span>
            </div>
            <h3 style="margin: 0; font-size: 1.4rem; font-weight: 700;">Michael Lin</h3>
          </div>
        </div>
        <p style="opacity: 0.95; font-size: 0.9rem; line-height: 1.5; margin: 0;">
          <strong>MAGNA Quality Manager</strong><br/>
          Architect of Compliance-WÃ¤chter<br/>
          AI for ISO 21434 & UN R155
        </p>
      </div>
      
      <!-- å³ä¾§è¯¦ç»†ä»‹ç» -->
      <div style="flex: 1; min-width: 300px;">
        <p style="font-size: 0.95rem; line-height: 1.8; opacity: 0.95; margin: 0 0 1.5rem;">
          ä½œä¸º MAGNA è´¨é‡ç»ç†ï¼Œæˆ‘åœ¨å¾·å›½æ±½è½¦ç”µå­è¡Œä¸šæ·±è€• 10+ å¹´ã€‚æ¯å¤©æˆ‘éƒ½è§è¯ç€ä¸€ä¸ªæ–°çš„ç“¶é¢ˆï¼š
          <strong style="color: #ffeb3b;">ç½‘ç»œå®‰å…¨åˆè§„ (UN R155 / ISO 21434)</strong>ã€‚
        </p>
        <p style="font-size: 0.95rem; line-height: 1.8; opacity: 0.95; margin: 0 0 1.5rem;">
          æˆ‘æ­£åœ¨æ„å»º <em style="color: #ffeb3b;">Compliance-WÃ¤chter</em> â€” ä¸€ä¸ª AI é©±åŠ¨çš„ Copilotï¼Œ
          è‡ªåŠ¨åŒ– TARA åˆ†æï¼Œå°†åˆè§„æ–‡ä¹¦å·¥ä½œå‡å°‘ <strong>70%</strong>ã€‚
        </p>
        
        <!-- ç¤¾äº¤é“¾æ¥ -->
        <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-top: 1.5rem;">
          <a href="https://www.linkedin.com/in/michael-lin-0a09ba67/" target="_blank" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #ffeb3b; text-decoration: none; padding: 0.6rem 1.2rem; background: rgba(255,255,255,0.1); border-radius: 8px; transition: all 0.3s ease; font-weight: 500;">
            <svg style="width:18px; height:18px; fill:currentColor;" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
            LinkedIn
          </a>
          <a href="mailto:haiqing.lin@compliance-waechter.com" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #ffeb3b; text-decoration: none; padding: 0.6rem 1.2rem; background: rgba(255,255,255,0.1); border-radius: 8px; transition: all 0.3s ease; font-weight: 500;">
            <svg style="width:18px; height:18px; fill:currentColor;" viewBox="0 0 24 24"><path d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"/></svg>
            Contact
          </a>
          <a href="https://compliance-waechter.com" target="_blank" style="display: inline-flex; align-items: center; gap: 0.5rem; color: #1a237e; text-decoration: none; padding: 0.6rem 1.2rem; background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 100%); border-radius: 8px; transition: all 0.3s ease; font-weight: 600;">
            <svg style="width:18px; height:18px; fill:currentColor;" viewBox="0 0 24 24"><path d="M13 10v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm-1-10c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm0 22c-5.514 0-10-4.486-10-10s4.486-10 10-10 10 4.486 10 10-4.486 10-10 10z"/></svg>
            äº†è§£ Compliance-WÃ¤chter
          </a>
        </div>
      </div>
      
    </div>
  </div>
</div>
{% endblock %}
